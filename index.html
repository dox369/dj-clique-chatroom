 <html>
<head>

<script>
	//var data;
	</script>
	
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6347867600463953"
     crossorigin="anonymous"></script>



  <style>



   * { margin: 0; padding: 0; box-sizing: border-box; }

      body { font: 13px Helvetica, Arial; }

      form { background: #DDDDDD; padding: 3px;  bottom: 0; width: 100%; position: fixed;}
//position: fixed;

      form input { border: 0; padding: 10px; width: 90%; margin-right: .5%; }

      form button { width: 9%; background: #0074D9; border: none; padding: 10px; align:right; float:right; }

      #messages { list-style-type: none; margin: 0; padding: 0; }

      #messages li { padding: 5px 10px; }

      #messages li:nth-child(odd) { background: #eee; }

/* Fix user-agent */



* {

  box-sizing: border-box;

}



html {

  font-weight: 300;

  -webkit-font-smoothing: antialiased;

}



html, input {

  font-family:

    "HelveticaNeue-Light",

    "Helvetica Neue Light",

    "Helvetica Neue",

    Helvetica,

    Arial,

    "Lucida Grande",

    sans-serif;

}



html, body {

  height: 100%;

  margin: 0;

  padding: 0;

}



ul {

  list-style: none;

  word-wrap: break-word;

}



/* Pages */



.pages {

  height: 100%;

  margin: 0;

  padding: 0;

  width: 100%;

}



.page {

  height: 100%;

  position: absolute;

  width: 100%;

}



/* Login Page */



.login.page {

  background-color: #000;

}



.login.page .form {

  height: 100px;

  margin-top: -100px;

  position: absolute;



  text-align: center;

  top: 50%;

  width: 100%;

}



.login.page .form .usernameInput {

  background-color: transparent;

  border: none;

  border-bottom: 2px solid #fff;

  outline: none;

  padding-bottom: 15px;

  text-align: center;

  width: 400px;

}



.login.page .title {

  font-size: 200%;

}



.login.page .usernameInput {

  font-size: 200%;

  letter-spacing: 3px;

}



.login.page .title, .login.page .usernameInput {

  color: #fff;

  font-weight: 100;

}



/* Chat page */



.chat.page {

  display: none;

}



/* Font */



.messages {

  font-size: 150%;

}



.inputMessage {

  font-size: 100%;

}



.log {

  color: gray;

  font-size: 70%;

  margin: 5px;

  text-align: center;

}



/* Messages */



.chatArea {

  height: 100%;

  padding-bottom: 60px;

}



.messages {

  height: 100%;

  margin: 0;

  overflow-y: scroll;

  padding: 10px 20px 10px 20px;

}



.message.typing .messageBody {

  color: gray;

}



.username {

  font-weight: 700;

  overflow: hidden;

  padding-right: 15px;

  text-align: right;

}



/* Input */



.inputMessage {

  border: 10px solid #DDDDDD;

  bottom: 0;

  height: 60px;

  left: 0;

  outline: none;

  padding-left: 10px;

  position: absolute;

  right: 0;

  width: 100%;

}





a:link {

    color: #0074D9; 

    background-color: transparent; 

    text-decoration: none;

}



a:visited {

    color: #0074D9;

    background-color: transparent;

    text-decoration: none;

}



a:hover {

    color: #0074D9;

    background-color: transparent;

    text-decoration: underline;

}



a:active {

    color: #0074D9;

    background-color: transparent;

    text-decoration: underline;

}

::-webkit-scrollbar {

    width: 12px;

}

::-webkit-scrollbar-track {

    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3); 

    border-radius: 10px;

}

::-webkit-scrollbar-thumb {

    border-radius: 10px;

    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5);

}



    </style>





 <link rel="stylesheet" type="text/css" href="/style.css">



<script src="https://dj-clique-chatroom-new.herokuapp.com/socket.io/socket.io.js"  type="text/javascript"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>

<script src="https://dj-clique-chatroom-new.herokuapp.com/static/javascripts/jquery.cssemoticons.js" type="text/javascript"></script>
<link href="https://dj-clique-chatroom-new.herokuapp.com/static/stylesheets/jquery.cssemoticons.css" media="screen" rel="stylesheet" type="text/css" />


<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
<style>
body {
	font-family: 'Roboto', sans-serif,arial;
}
</style>


</head>
<body>



<script>





//--------------------------------------------------------------

</script>

       <script type="text/javascript">

            /**

             * @param {string} filename The name of the file WITHOUT ending

             */

            function playSound(filename){   
                document.getElementById("sound").innerHTML='<audio autoplay="autoplay" ><source src="' + filename + '.mp3" type="audio/mpeg" /><source src="' + filename + '.ogg" type="audio/ogg" /><embed hidden="true" autostart="true" loop="false" src="' + filename +'.mp3" /></audio>';
            }



        </script>


 


<script>
//------------------------------------------------------
/**

 * Get the value of a querystring

 * @param  {String} field The field to get the value of

 * @param  {String} url   The URL to get the value from (optional)

 * @return {String}       The field value

 */

var getQueryString = function ( field, url ) {

    var href = url ? url : window.location.href;

    var reg = new RegExp( '[?&]' + field + '=([^&#]*)', 'i' );

    var string = reg.exec(href);

    return string ? string[1] : null;

};


	var thisOne = getQueryString('room'); 
	var myUserId = getQueryString('userid'); 

//alert(thisOne);

//---------------------------------------------------------

//--------------------------
function escapeOutput(toOutput){

    return toOutput.replace('&','&amp;').replace('<','&lt;').replace('>','&gt;').replace('"','&quot;').replace("'",'&#x27').replace('/','&#x2F');

}
//--------------------------
function getRandomizer(bottom, top) {

    return function() {

        return Math.floor( Math.random() * ( 1 + top - bottom ) ) + bottom;

    }

}
//-------------------------------------------------------

function sanitizeString(str){

    str = str.replace(/[^a-z0-9áéíóúñü \.,_-]/gim,"");

    return str.trim();

}


//--------------------------




//---------------------------
//////function connect(){


//=========================================================================================
//=========================================================================================



//var socket = io.connect('https://dj-clique-chatroom-new.herokuapp.com/')
//var socket = io.connect()

	var socket = io.connect('https://dj-clique-chatroom-new.herokuapp.com:8080')
	
	//this.socket = io('https://dj-clique-chatroom-new.herokuapp.com/')


var tryReconnect = function(){



    if (socket.socket.connected === false &&

        socket.socket.connecting === false) {

        // use a connect() or reconnect() here if you want


        socket.socket.connect()
	//socket.socket.reconnect()

   }

}



var intervalID = setInterval(tryReconnect, 1000)



socket.on('connect', function () {

    // once client connects, clear the reconnection interval function
	socket.emit('adduser', 'DJ Guest'+Math.floor((Math.random() * 1000000) + 1));

   	

	socket.emit('switchRoom', thisOne);


	///////////////console.log(thisOne);
	clearInterval(intervalID);


	//... do other stuff


});


//=========================================================================================
 
//////}
///////connect();

</script>


<div style="position:fixed;left:0px;top:0px;background-color:#DDDDDD;width:100%;padding-left:20px;padding:10px;opacity:.9;border-radius:  5px 5px;border-bottom-right-radius: 0px;border-top-right-radius: 0px;" align="center">
<strong>CHATROOM</strong>
</div>

<!--

<div style="float:left;width:100px;border-right:1px solid black;height:300px;padding:10px;overflow:scroll-y;">

	<b>ROOMS</b>

	<div id="rooms"></div>

</div>
-->
<br><br><br>


<div style="float:left;width:300px;height:250px;overflow:scroll-y;padding:10px;padding-bottom:100px;padding-top:40px;">

	<div id="conversation" style="padding-bottom:60px;"></div>

	<!--<input id="data" style="width:200px;" />-->

	<!--<input type="button" id="datasend" value="send" />-->

<!--<div id="conversation" ></div>
--!>
	</div>



	<div id="welcome"></div>
  <!--  <ul id="messages"></ul>-->


 

    <form >
	<!--<div id="message" name="message">-->

 <input id="data" size="50" name="data" autocomplete="off" placeholder="Type your message here" />

<!-- <input type="file" id="myFile"> -->

<small><small>
&nbsp;&nbsp;&nbsp;&nbsp;
<a href="javascript:void(0);" onclick="alert('send giphy');">GIF</a>&nbsp;&nbsp;&nbsp;&nbsp;
<a href="javascript:void(0);" onclick="alert('send voice clip');">VOICE CLIP</a>&nbsp;&nbsp;&nbsp;&nbsp;
<a href="javascript:void(0);" onclick="alert('send pic');">UPLOAD</a>&nbsp;&nbsp;&nbsp;&nbsp;
<a href="javascript:void(0);" onclick="alert('send emoticon');">EMOTICON</a>&nbsp;&nbsp;&nbsp;&nbsp;
<a href="javascript:void(0);" onclick="alert('send sticker');">STICKER</a>
</small></small>

 <button name="datasend" id="datasend" onclick="return false;">&rArr;</button>

	</div>

    </form>


<!--

<script>

var ctx = document.getElementById('conversation').getContext('2d');



// ...



socket.on("image", function(info) {

  if (info.image) {

    var img = new Image();

    img.src = 'data:image/jpeg;base64,' + info.buffer;

    ctx.drawImage(img, 0, 0);

  }

});

</script>

-->







<script>

//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================


var currentVid;
var currentVid2;


function sendPause(){
	document.getElementById("message").value = 'pause99';
	document.getElementById("sendBtn").click();
}
function sendPlay(){
	document.getElementById("message").value = 'play99';
	document.getElementById("sendBtn").click();
}
function sendSeek(t){
	//document.getElementById("message").value = 'seek99-'+t;
	//document.getElementById("sendBtn").click();
}
function sendNext(){
	document.getElementById("message").value = 'next99';
	document.getElementById("sendBtn").click();
}
function sendPrev(){
	document.getElementById("message").value = 'prev99';
	document.getElementById("sendBtn").click();
}
function sendLoad(){
	document.getElementById("message").value = 'load99';
	document.getElementById("sendBtn").click();
}

function sendQueue(){
	document.getElementById("message").value = 'queue99';
	document.getElementById("sendBtn").click();
}

function sendFetch(){
	document.getElementById("message").value = 'fetch99';
	document.getElementById("sendBtn").click();
}

function sendRefresh(){
	document.getElementById("message").value = 'refresh99';
	document.getElementById("sendBtn").click();
}

function sendMute(){
	document.getElementById("message").value = 'mute99';
	document.getElementById("sendBtn").click();
}

function sendUnmute(){
	document.getElementById("message").value = 'unmute99';
	document.getElementById("sendBtn").click();
}

function repeatOn(){
	document.getElementById("message").value = 'repeatOn99';
	document.getElementById("sendBtn").click();
}

function repeatOff(){
	document.getElementById("message").value = 'repeatOff99';
	document.getElementById("sendBtn").click();
}

function shuffleOn(){
	document.getElementById("message").value = 'shuffleOn99';
	document.getElementById("sendBtn").click();
}

function shuffleOff(){
	document.getElementById("message").value = 'shuffleOff99';
	document.getElementById("sendBtn").click();
}

function keepAlive(){
	document.getElementById("message").value = 'keepAlive99';
	document.getElementById("sendBtn").click();
}
//------------------------------------------

function sendVid(vid){

var tempVid2
	if (vid.indexOf("sendvid") >= 0) {
			tempVid2 = vid;
			tempVid2 = tempVid2.slice(8);
			//alert(tempVid2);

		}

	document.getElementById("message").value = 'sendvid-'+tempVid2;
	document.getElementById("sendBtn").click();
}

function seekTo(t){

var tempTime2

	if (t.indexOf("seekTo") >= 0) {
			tempTime2 = t;
			tempTime2 = tempTime2.slice(7);
			//alert(tempTime2);

		}

	document.getElementById("message").value = 'seekTo-'+tempTime2;
	document.getElementById("sendBtn").click();
}

//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================

</script>




<script>

//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================




//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================
//================================================================================



</script>









 

    <script>



/**

 * Get the value of a querystring

 * @param  {String} field The field to get the value of

 * @param  {String} url   The URL to get the value from (optional)

 * @return {String}       The field value

 */

var getQueryString = function ( field, url ) {

    var href = url ? url : window.location.href;

    var reg = new RegExp( '[?&]' + field + '=([^&#]*)', 'i' );

    var string = reg.exec(href);

    return string ? string[1] : null;

};


	var thisOne = getQueryString('room'); 
	var myUserId = getQueryString('userid'); 

//alert(thisOne);

//---------------------------------------------------------


//========================================================

function escapeOutput(toOutput){

    return toOutput.replace('&','&amp;').replace('<','&lt;').replace('>','&gt;').replace('"','&quot;').replace("'",'&#x27').replace('/','&#x2F');

}

var currentTrackTime = 0;
var currentVideoid;
//var numClients = 0;

function getRandomizer(bottom, top) {

    return function() {

        return Math.floor( Math.random() * ( 1 + top - bottom ) ) + bottom;

    }

}
//-------------------------------------------------------

function sanitizeString(str){

    str = str.replace(/[^a-z0-9áéíóúñü \.,_-]/gim,"");

    return str.trim();

}

//-------------------------------------------------------
//-------------------------------------------------------
//-------------------------------------------------------
//-------------------------------------------------------
//-------------------------------------------------------
//-------------------------------------------------------

function connect(){


        websocket = new WebSocket("ws://162.248.247.18:5060/?room="+thisOne+"&userid="+myUserId);

        $('form').submit(function() {

	

            name = $('#name').val() ? $('#name').val() : 'Anonymous';

            $('#name-div').hide();

            $('#welcome').text('Hello ' + escapeOutput(name));

if ($('#message').val() != ''){

            websocket.send(JSON.stringify({

                name:  name,

                message: thisOne+'||'+myUserId+'||'+$('#message').val()

            }));
	}

            $('#message').focus();

            $('#message').val('');

            return false;



        });



 

        websocket.onmessage = function(evt) {
		
		//console.log(roomid);
		
//-------------------------------------------------------
//-------------------------------------------------
//-------------------------------------------------------

		if (evt.data.indexOf("sendvid") >= 0 )   {

			//alert(evt.data);
			//var thisVid2;
			var thisVid2 = evt.data;

			thisVid2 = thisVid2.substring(thisVid2.indexOf("sendvid-") + 8);

			////alert('thisvid2:'+thisVid2);

			top.postMessage("sendvid-"+thisVid2, 'http://djclique.com');
			
		}
		if (evt.data.indexOf("seekTo") >= 0 )   {

			//alert(evt.data);
			//var thisTime2;
			var thisTime2 = evt.data;

			thisTime2 = thisTime2.substring(thisTime2.indexOf("seekTo-") + 7);

			////alert('thisvid2:'+thisVid2);

			top.postMessage("seekTo-"+thisTime2, 'http://djclique.com');
			
		}
		if (evt.data.indexOf("play99") >= 0 )   {
			//top.postMessage(currentTrackTime, 'http://djclique.com');
			top.postMessage("playVideo", 'http://djclique.com');

		}
		if (evt.data.indexOf("pause99") >= 0 )   {

			top.postMessage("pauseVideo", 'http://djclique.com');

		}
		if (evt.data.indexOf("seek99") >= 0 || evt.data.indexOf("seekVideo") >= 0 )   {

			//top.postMessage("seekVideo-"+currentTrackTime, 'http://djclique.com');

		}
		if (evt.data.indexOf("next99") >= 0 )   {

			top.postMessage("nextVideo", 'http://djclique.com');

		}
		if (evt.data.indexOf("prev99") >= 0 )   {

			top.postMessage("prevVideo", 'http://djclique.com');

		}
		if (evt.data.indexOf("load99") >= 0 )   {

			top.postMessage("loadList", 'http://djclique.com');

		}
		if (evt.data.indexOf("queue99") >= 0 )   {

			top.postMessage("queueList", 'http://djclique.com');

		}
		if (evt.data.indexOf("fetch99") >= 0 )   {

			top.postMessage("fetchList", 'http://djclique.com');

		}
		if (evt.data.indexOf("refresh99") >= 0 )   {

			top.postMessage("refreshPage", 'http://djclique.com');

		}
		if (evt.data.indexOf("mute99") >= 0 )   {

			top.postMessage("mute", 'http://djclique.com');

		}
		if (evt.data.indexOf("unmute99") >= 0 )   {

			top.postMessage("unmute", 'http://djclique.com');

		}
		if (evt.data.indexOf("keepAlive99") >= 0 )   {

			top.postMessage("keepAlive", 'http://djclique.com');

		} 

//-------------------------------------------------------
//-------------------------------------------------
//-------------------------------------------------------

		if (evt.data.indexOf("repeatOn99") >= 0 )   {

			top.postMessage("repeatOn", 'http://djclique.com');

		}
		if (evt.data.indexOf("repeatOff99") >= 0 )   {

			top.postMessage("repeatOff", 'http://djclique.com');

		}
		if (evt.data.indexOf("shuffleOn99") >= 0 )   {

			top.postMessage("shuffleOn", 'http://djclique.com');

		}
		if (evt.data.indexOf("shuffleOff99") >= 0 )   {

			top.postMessage("shuffleOff", 'http://djclique.com');

		}  
		
		
//-------------------------------------------------------
//-------------------------------------------------------
//-------------------------------------------------------
//-------------------------------------------------------

		if (evt.data.indexOf("TrackTimeID") ==-1 && evt.data.indexOf("pause99") ==-1 && evt.data.indexOf("play99") ==-1 && evt.data.indexOf("next99") ==-1 && evt.data.indexOf("prev99") ==-1 && evt.data.indexOf("onevid99") ==-1  && evt.data.indexOf("load99") ==-1 && evt.data.indexOf("sendvid") == -1 && evt.data.indexOf("seekTo") == -1 && evt.data.indexOf("repeatOn99") == -1 && evt.data.indexOf("repeatOff99") == -1 && evt.data.indexOf("shuffleOn99") == -1  && evt.data.indexOf("shuffleOff99") == -1  && evt.data.indexOf("keepAlive99") == -1 )   {


            		$('#messages').append($('<li>').html(evt.data));
			$('#messages').emoticonize();
			

			playSound('http://djclique.com/bing');
		
		} else {
			//alert('postMessage/TrackTimeID is here...');
		}

		

		//////console.log(evt.data);

        };

 

        websocket.onerror = function(evt) {

            $('#messages').append($('<li>').text('<span style="color: red;">ERROR:</span> ' + evt.data));

        };



        websocket.onopen = function(evt) {

         websocket.send(JSON.stringify({

                name: name,

                message: '[user has connected]'

            }));
		
		//parent.location.reload();
		

        };




//-------------------------------------------------------
//-------------------------------------------------------
//-------------------------------------------------------
//-------------------------------------------------------
//-------------------------------------------------------


  websocket.onclose = function(e) {

    console.log('Socket is closed. Reconnect will be attempted in 1 second.', e.reason);
	//alert('Disconnected from Server... attempting to reconnect...');

    setTimeout(function() {

      connect();
	///parent.document.getElementById("playlist").data = "http://djclique.com/playlists/?room=<%=request.querystring("room")%>&userid=<%=request.querystring("userid")%>"

    }, 1000);

  };


}
connect();

//-------------------------------------------------------
//-------------------------------------------------------
//-------------------------------------------------------
//-------------------------------------------------------

function sendTime2(client){

setInterval(function(){ 

         websocket.send(JSON.stringify({

                name: name,

                message: 'TrackTimeID---'+currentTrackTime
			// message: currentTrackTime

            }));

    //console.log('someTime');

    //client.send('TrackTimeID---someTime');


	//console.log('TTIME:'+parent.currentTrackTime);
	//console.log('TTIME:'+currentTrackTime);



 }, 1000);

}
//sendTime2();

//-------------------------------------------------------
//-------------------------------------------------------
//-------------------------------------------------------
//-------------------------------------------------------
//-------------------------------------------------------
function test(){

setInterval(function(){ 

    //console.log('someTime');

    //client.send('TrackTimeID---someTime');

	//console.log('TTIME:'+parent.currentTrackTime);
	//console.log('TTIME:'+currentTrackTime);

	console(repeatStat);

 }, 1000);

}
//test();
//-------------------------------------------------------
//-------------------------------------------------------
//-------------------------------------------------------
//-------------------------------------------------------
//-------------------------------------------------------
//-------------------------------------------------------


    </script>






    <script>


           //top.postMessage('hello', 'http://djclique.com');


window.onload = function () {
		//top.postMessage(currentTrackTime, 'http://djclique.com');
};



        window.addEventListener( "message",

          function (e) {

                if(e.origin !== 'http://djclique.com'){ return; } 

               //alert(e.data);
		/////////////////console.log(e.data);
		currentTrackTime = e.data;

		var tempVid;
		var tempTime;
	
		//alert(e.data);

		if (e.data.indexOf("sendvid") >= 0) {
			tempVid = e.data;
			tempVid = tempVid.slice(8);
			//alert(tempVid);
			////alert(currentVid2);
			currentVid2 = tempVid;
			sendVid('sendvid-'+currentVid2);
			/////alert('from messenger: '+currentVid2);
			
		}
		if (e.data.indexOf("seekTo") >= 0) {
			tempTime = e.data;
			//tempTime = tempTime.slice(6);
			//////tempTime = tempTime.replace(/-/g, "");	

			//alert(tempTime);
			////alert(currentVid2);
			currentTime2 = tempTime;
			seekTo('seekTo-'+currentTime2);
			/////alert('from messenger: '+currentVid2);

		}
		if (e.data === 'playVideo') {
			sendPlay();

		}
		if (e.data === 'pauseVideo') {
			sendPause();

		}
		if (e.data === 'nextVideo') {
			sendNext();
		}
		if (e.data === 'prevVideo') {
			sendPrev();
		}
		if (e.data === 'loadList') {
			sendLoad();
		}
		if (e.data === 'queueList') {
			sendQueue();
		}
		if (e.data === 'fetchList') {
			sendFetch();
		}
		if (e.data === 'refreshPage') {
			sendRefresh();		
		}
		if (e.data === 'seekVideo') {
			sendSeek();
		
		}
		if (e.data === 'keepAlive') {
			keepAlive();
		
		} 

//-------------------------------------------------------
//-------------------------------------------------------

		if (e.data === 'sendMute') {
			sendMute();
		}
		if (e.data === 'sendUnmute') {
			sendUnmute();

		} 

//-------------------------------------------------------
//-------------------------------------------------------

		if (e.data === 'repeatOn') {
			repeatOn();
		}
		if (e.data === 'repeatOff') {
			repeatOff();
		}

//-------------------------------------------------------
//-------------------------------------------------------

		if (e.data === 'shuffleOn') {
			shuffleOn();
		}
		if (e.data === 'shuffleOff') {
			shuffleOff();
		}
		
//-------------------------------------------------------
//-------------------------------------------------------		


          },

          false);

//-------------------------------------------------------
//-------------------------------------------------------
//-------------------------------------------------------
//-------------------------------------------------------
//-------------------------------------------------------


    </script>



<script>
//window.onload = function() {
	//alert('player loaded successfully');
//	parent.iframeLoaded = 1;
//}

</script>
<div id="sound"></div>

<div id="sound"></div>



</body>
</html>
